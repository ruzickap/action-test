on:
  schedule:
    - cron: '0 0 * * 0'

name: Check broken links
jobs:
  broken-link-checker:
    name: Check broken links - google.com
    runs-on: ubuntu-18.04
    steps:
      - name: Check - container
        uses: ruzickap/action-test@v1
        env:
          MUFFET_CMD_PARAMS: --verbose --ignore-fragments --one-page-only
          URL: https://google.com

      - name: Check - simple
        env:
          MUFFET_CMD_PARAMS: --verbose --ignore-fragments --one-page-only
          URL: https://google.com
        run: |
          wget -qO- https://raw.githubusercontent.com/ruzickap/action-test/v1/entrypoint.sh | bash

      - uses: actions/checkout@v2

      - name: Check - simple - local pages
        env:
          MUFFET_CMD_PARAMS: --skip-tls-verification --verbose
          URL: https://my-testing-domain.com
          PAGES_PATH: ./tests/
        run:
          wget -qO- https://raw.githubusercontent.com/ruzickap/action-test/v1/entrypoint.sh | bash
